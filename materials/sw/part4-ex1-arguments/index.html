<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <link rel="canonical" href="https://osg-htc.org/virtual-school-pilot-2020/materials/sw/part4-ex1-arguments/">
    <link rel="shortcut icon" href="../../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Exercise 4.1 - OSG Virtual School Pilot 2020</title>
    <link href="../../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../css/highlight.css">
    <link href="../../../css/extra.css" rel="stylesheet">
    <link href="../../../css/codehilite.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../../js/jquery-3.2.1.min.js"></script>
    <script src="../../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "Software Exercise 4.1: Passing Arguments Through the Wrapper Script", url: "#_top", children: [
              {title: "Background", url: "#background" },
              {title: "Identifying Potential Arguments", url: "#identifying-potential-arguments" },
              {title: "Modifying Files", url: "#modifying-files" },
          ]},
        ];

    </script>
    <script src="../../../js/base.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    <style type="text/css"> pre em { font-style: normal; background-color: yellow; } pre strong { font-style: normal; font-weight: bold; color: #008; } </style>

<h1 id="software-exercise-41-passing-arguments-through-the-wrapper-script">Software Exercise 4.1: Passing Arguments Through the Wrapper Script<a class="headerlink" href="#software-exercise-41-passing-arguments-through-the-wrapper-script" title="Permanent link">&para;</a></h1>
<p>In this exercise, you will change the wrapper script and submit file from a previous exercise to use arguments. It builds on <a href="../../../materials/sw/part2-ex2-prepackaged">Exercise 2.2</a> from earlier, so only do this exercise if you've already done Exercise 2.2.</p>
<h2 id="background">Background<a class="headerlink" href="#background" title="Permanent link">&para;</a></h2>
<p>In Exercise 2.2, the wrapper scripts had all files and options written out explicitly. However, imagine if you wanted to run the same job multiple times, or even just try out one or two different options or inputs. Instead of writing new wrapper scripts for each job, you can modify the script so that some of the values are set by <em>arguments</em>. Using script arguments will allow you to use the same script for multiple jobs, by providing different inputs or parameters. These arguments are normally passed on the command line:</p>
<p>But in our world of job submission, the arguments will be listed in the submit file, in the arguments line.</p>
<h2 id="identifying-potential-arguments">Identifying Potential Arguments<a class="headerlink" href="#identifying-potential-arguments" title="Permanent link">&para;</a></h2>
<ol>
<li>Log into your account on the submit server where you ran Exercise 2.2 (<code>learn.chtc.wisc.edu</code>).</li>
<li>Find the directory you used to submit Open BUGS jobs and open your <code>run_openbugs.sh</code> wrapper script.</li>
<li>What values might we want to input to the script via arguments? Hint: anything that we might want to change if we were to run the script many times.</li>
</ol>
<p>In this example, some values we might want to change are the name of the input and output file. These will be the arguments for our script.</p>
<h2 id="modifying-files">Modifying Files<a class="headerlink" href="#modifying-files" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Note the name of the input and output files and open the submit file. Add an arguments line if it doesn't already exist, and fill it with our two chosen arguments: the name of the input file and the name of the output file: </p>
<div class="codehilite"><pre><span></span>arguments = input.txt results.txt
</pre></div>


</li>
<li>
<p>Now go back to the wrapper script. Each scripting language (bash, perl, python, R, etc.) will have its own particular syntax for capturing command line arguments. For bash (the language of our current wrapper script), the variables <code>$1</code> and <code>$2</code> represent  the first and second arguments, respectively. (If our script needed three arguments, we would use <code>$3</code> for the third one). Thus, in  the main command of the script, replace the file names with these variables: </p>
<div class="codehilite"><pre><span></span>OpenBUGS &lt; $1 &gt; $2
</pre></div>


</li>
<li>
<p>Once these changes are made, submit your jobs with <code>condor_submit</code>. Use <code>condor_q -nobatch</code> to see what the job command looks like to HTCondor.</p>
</li>
</ol>

  <br>
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../part4-ex2-python-extras/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../part4-ex2-python-extras/" class="btn btn-xs btn-link">
        Exercise 4.2
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../part3-ex1-singularity/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../part3-ex1-singularity/" class="btn btn-xs btn-link">
        Exercise 3.1
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="col-md-12 wm-page-content">
  <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>